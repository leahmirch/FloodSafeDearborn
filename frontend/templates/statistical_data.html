{% extends "layout.html" %}
{% block content %}
<div class="container">
    <section>
        <h2><strong>Flood Statistics in Dearborn, Michigan</strong></h2>
        <p>
            Dearborn, Michigan, is particularly vulnerable to flooding due to its low elevation and aging sewer infrastructure. Historical flood events have often been exacerbated by heavy rainfall, leading to severe damage to homes, roads, and public infrastructure.
        </p>
        <p>
            Between 2018 and 2023, Dearborn experienced multiple significant flood events, with rising trends of moderate to severe flooding. Events include infrastructure failures and overflow from the Rouge River, which runs through the city. FEMA and NOAA reports indicate an increasing frequency of high-risk events due to changing climate conditions.
        </p>
    </section>

    <hr>

    <!-- Events by Type -->
    <section>
        <h3><strong>Overview of Flood Event Charts</strong></h3>
        <p>
            The following charts provide a comprehensive analysis of flood severity from 2018 to 2023, categorized into Low, Moderate, and High severity levels. The second graph highlights the average annual rainfall, showing that while 2019 experienced the highest precipitation, 2021 incurred the most significant damage to homes and infrastructure. 
            Users can interact with the visualizations by hovering over the pie chart to view the percentage contribution of each severity level and over the line graph to see precise average precipitation values for each year.
        </p>
        <div id="events-by-type"></div>
    </section>

    <hr>

    <!-- Flood Severity Distribution -->
    <section>
        <h3><strong>Flood Severity Distribution</strong></h3>
        <p>
            The chart below highlights the severity levels of reported flood events. 
            Approximately half of all flood events in Dearborn are categorized as "Low Severity," while "Moderate" and "High" severity events constitute a significant portion of the risk.
            The years 2018, 2020, and 2023 are categorized as low severity because there were either no major flood events and minimal reports of flooding events. 2019 and 2022 were placed under moderate severity due to the several localized flooding events within Southeast Michigan. 
            The year 2021 is categorized as the most catastrophic year due to severe storms and widespread impacts within Dearborn. 
        </p>
        <div id="flood-severity"></div>
    </section>

    <hr>

    <!-- Flood Events Over Time -->
    <section>
        <h3><strong>Flood Events Over Time</strong></h3>
        <p>
            Historical flood trends in Dearborn from 2018 to 2023 show an upward trajectory in flood frequency, particularly between 2019 and 2021. Efforts to mitigate these issues include federal and local infrastructure improvements.  Sewers in Dearborn were built to withstand three inches of rain during a 24-hour period. The average monthly amount of rain within Southeast Michigan is between 3-4 inches.
        </p>
        <div id="flood-events-over-time"></div>
    </section>

    <hr>

    <footer>
        <h4><strong>Sources</strong></h4>
        <ul>
            <li>
                <a href="https://www.noaa.gov" target="_blank">NOAA Climate Data</a>
            </li>
            <li>
                <a href="https://msc.fema.gov" target="_blank">FEMA Flood Map Service Center</a>
            </li>

            <li>
                <a href="https://dearborn.gov/residents/flood-preparedness-%26-recovery#" target="_blank">Flood Preparedness & Recovery</a>
            </li>

            <li>
                Regional Flood Risk Assessments (Dearborn Reports, 2023)
            </li>
        </ul>
    </footer>
</div>

<script src="https://cdn.plot.ly/plotly-2.20.0.min.js"></script>
<script>
  //place it here

    const floodSeverity = [
        {
            labels: ['Low', 'Moderate', 'High'],
            values: [50, 33.3, 16.67],
            type: 'pie',
            marker: { colors: ['#1f77b4', '#ff7f0e', '#d62728'] },
            text: ['2018, 2020, 2023', '2019, 2022', '2021'], //display text on the pie chart to signify the years 
            textinfo: 'text', // Display the custom text (years) on the pie chart
            hoverinfo: 'label+value' // Show label and value on hover

        }
    ];
    Plotly.newPlot('flood-severity', floodSeverity, {
        title: 'Flood Severity Distribution'
    });

    
    const eventsOverTime = [
        {
            x: ['2018', '2019', '2020', '2021', '2022', '2023'],
            y: [38.0, 41.8, 36.5, 37.2, 35.8, 36.0],
            type: 'line',
            line: { color: 'blue' }
        }
    ];
    Plotly.newPlot('flood-events-over-time', eventsOverTime, {
        title: 'Average Precipitation within Dearborn, MI',
        xaxis: { title: 'Year' },
        yaxis: { title: 'Average Precipitation (Inches)' }
    });
</script>
{% endblock %}